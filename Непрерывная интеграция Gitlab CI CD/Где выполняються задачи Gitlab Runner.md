![[Pasted image 20251009171953.png]]


## üß© –ß—Ç–æ –≤–æ–æ–±—â–µ —Ç–∞–∫–æ–µ Runner

**GitLab Runner** ‚Äî —ç—Ç–æ **–ø—Ä–æ–≥—Ä–∞–º–º–∞**, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã –∏–∑ `.gitlab-ci.yml`.  
–≠—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞:

- –Ω–∞ **—Å–µ—Ä–≤–µ—Ä–µ** (Linux, Windows, macOS),
    
- –≤ **Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ**,
    
- –≤ **Kubernetes –∫–ª–∞—Å—Ç–µ—Ä–µ**,
    
- –¥–∞–∂–µ –Ω–∞ —Ç–≤–æ—ë–º **–Ω–æ—É—Ç–±—É–∫–µ**, –µ—Å–ª–∏ –∑–∞—Ö–æ—á–µ—à—å üòÖ

–¢–æ –µ—Å—Ç—å ‚Äî Runner —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ **–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å**, –∏ —Ç—ã —Å–∞–º —Ä–µ—à–∞–µ—à—å, **–≥–¥–µ –æ–Ω –∂–∏–≤—ë—Ç** –∏ **–≤ –∫–∞–∫–æ–π —Å—Ä–µ–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç**.

–ú–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å —Ç–∞–∫:

> Runner ‚Äî —ç—Ç–æ ¬´—Ä–∞–±–æ—á–∏–π¬ª, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –æ–ø–∏—Å–∞–ª –≤ CI/CD.
> 

   –ö–æ–≥–¥–∞ —Ç—ã –ø—É—à–∏—à—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ GitLab, –æ–Ω –≤–∏–¥–∏—Ç `.gitlab-ci.yml` –∏ —Å–æ–∑–¥–∞—ë—Ç **pipeline (–∫–æ–Ω–≤–µ–π–µ—Ä)**.    - GitLab –≥–æ–≤–æ—Ä–∏—Ç:  
   üëâ ¬´–ù—É–∂–µ–Ω –∫—Ç–æ-—Ç–æ, —á—Ç–æ–±—ã –≤—ã–ø–æ–ª–Ω–∏—Ç—å —ç—Ç–∏ –∫–æ–º–∞–Ω–¥—ã¬ª.

- –¢—É—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è **GitLab Runner** ‚Äî –ø—Ä–æ–≥—Ä–∞–º–º–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ —Ç–≤–æ–µ–º—É GitLab –∏ **–±–µ—Ä—ë—Ç –∑–∞–¥–∞–Ω–∏—è –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**.

1. Runner –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã (`script`), –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã —É–∫–∞–∑–∞–ª, –≤ **–∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Å—Ä–µ–¥–µ** ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ –∏–ª–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
    
2. –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–Ω –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–±—Ä–∞—Ç–Ω–æ –≤ GitLab ‚Äî  
    –∏ —Ç—ã –≤–∏–¥–∏—à—å —Å—Ç–∞—Ç—É—Å: ‚úÖ Passed –∏–ª–∏ ‚ùå Failed.



### ‚öôÔ∏è –í–∏–¥—ã —Ä–∞–Ω–Ω–µ—Ä–æ–≤

| –¢–∏–ø                 | –ì–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç                                            | –û–ø–∏—Å–∞–Ω–∏–µ                                                   |
| ------------------- | ------------------------------------------------------- | ---------------------------------------------------------- |
| **Shared runner**   | –£–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–∞–º–∏–º GitLab (–∏–ª–∏ –∞–¥–º–∏–Ω–æ–º –∫–æ–º–ø–∞–Ω–∏–∏)         | –î–æ—Å—Ç—É–ø–µ–Ω –≤—Å–µ–º –ø—Ä–æ–µ–∫—Ç–∞–º –≤ GitLab. –£–¥–æ–±–µ–Ω –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –∑–∞–¥–∞—á. |
| **Specific runner** | –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –≤ Docker, VM –∏ —Ç.–¥. | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º –∏–ª–∏ –≥—Ä—É–ø–ø–æ–π.       |
| **Group runner**    | –ù–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è —Ü–µ–ª–æ–π –≥—Ä—É–ø–ø–µ –ø—Ä–æ–µ–∫—Ç–æ–≤                       | –ü—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –º–µ–∂–¥—É shared –∏ specific.             |
|                     |                                                         |                                                            |


### ‚öôÔ∏è –†–∞–Ω–Ω–µ—Ä executor

–ö–æ–≥–¥–∞ —Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—à—å GitLab Runner (–Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `gitlab-runner register`),  
GitLab —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç, **–∫–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º** –æ–Ω –±—É–¥–µ—Ç **–≤—ã–ø–æ–ª–Ω—è—Ç—å –∑–∞–¥–∞—á–∏**.
–≠—Ç–æ –∏ –µ—Å—Ç—å **executor** ‚Äî —Å–ø–æ—Å–æ–± –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è job‚Äô–æ–≤.


## üîß –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã executors:

|Executor|–ì–¥–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è job|–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ / –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å|
|---|---|---|
|**shell**|–ù–∞ **—Ç–æ–π –∂–µ –º–∞—à–∏–Ω–µ**, –≥–¥–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω —Ä–∞–Ω–Ω–µ—Ä|–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –≤–∞—Ä–∏–∞–Ω—Ç. –ö–æ–º–∞–Ω–¥—ã –∏–∑ `.gitlab-ci.yml` –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–∞–∫ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ.|
|**docker**|–í **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ Docker**|–ë–µ–∑–æ–ø–∞—Å–Ω–æ, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ. –ö–∞–∂–¥—ã–π job –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –≤ —á–∏—Å—Ç–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –ø–æ—Ç–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —É–¥–∞–ª—è–µ—Ç—Å—è. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è CI.|
|**docker+machine**|–í –æ—Ç–¥–µ–ª—å–Ω–æ–π **–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω–µ**|–î–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, AWS EC2 –∏–ª–∏ GCP VM).|
|**ssh**|–ü–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ **—É–¥–∞–ª—ë–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É** –ø–æ SSH –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç job —Ç–∞–º|–£–¥–æ–±–Ω–æ, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –¥–µ–ø–ª–æ–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –Ω–∞–ø—Ä—è–º—É—é.|
|**kubernetes**|–í **Kubernetes-–ø–æ–¥–∞—Ö**|–î–ª—è –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö CI/CD —Å–∏—Å—Ç–µ–º –Ω–∞ Kubernetes.|
|**custom**|–õ—é–±–æ–π –¥—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–±, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã —Å–∞–º —Ä–µ–∞–ª–∏–∑—É–µ—à—å|–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä–µ–¥–∫–æ.|

### 1. Shell runner

- –†–∞–Ω–Ω–µ—Ä —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ —Ç–≤–æ—ë–º —Å–µ—Ä–≤–µ—Ä–µ.
- GitLab –ø–µ—Ä–µ–¥–∞—ë—Ç –∫–æ–º–∞–Ω–¥—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä:
    
    `script:   - echo "Deploying..."   - systemctl restart myapp`
    
- –≠—Ç–∏ –∫–æ–º–∞–Ω–¥—ã –ø—Ä–æ—Å—Ç–æ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–∞–∫ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ (`bash` –∏–ª–∏ `powershell`).
    

**–ü–ª—é—Å—ã:** –ø—Ä–æ—Å—Ç–æ, –±—ã—Å—Ç—Ä–æ.  
**–ú–∏–Ω—É—Å—ã:** –Ω–µ—Ç –∏–∑–æ–ª—è—Ü–∏–∏ (–≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø –∫ —Å–∏—Å—Ç–µ–º–µ).


### Docker runner

- GitLab —Å–æ–∑–¥–∞—ë—Ç **–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**, –Ω–∞–ø—Ä–∏–º–µ—Ä —Å –æ–±—Ä–∞–∑–æ–º `python:3.11`.
    
- –í –Ω—ë–º –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–æ–º–∞–Ω–¥—ã –∏–∑ —Ç–≤–æ–µ–≥–æ job:
    
    `image: python:3.11 script:   - pip install -r requirements.txt   - pytest`
    
- –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä **—É–¥–∞–ª—è–µ—Ç—Å—è**.
    
**–ü–ª—é—Å—ã:** –∏–∑–æ–ª—è—Ü–∏—è, —á–∏—Å—Ç–∞—è —Å—Ä–µ–¥–∞ –∫–∞–∂–¥—ã–π —Ä–∞–∑.  
**–ú–∏–Ω—É—Å—ã:** —á—É—Ç—å –º–µ–¥–ª–µ–Ω–Ω–µ–µ, –Ω—É–∂–Ω–∞ Docker-—Å—Ä–µ–¥–∞.


### üîê 3. SSH runner

- GitLab –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ —É–¥–∞–ª—ë–Ω–Ω–æ–º—É —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã —Ç–∞–º:
    
    `script:   - git pull   - systemctl restart backend`
    

**–ü–ª—é—Å—ã:** —É–¥–æ–±–Ω–æ –¥–ª—è –¥–µ–ø–ª–æ—è.  
**–ú–∏–Ω—É—Å—ã:** –Ω–µ –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–æ, –Ω—É–∂–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –¥–æ—Å—Ç—É–ø.